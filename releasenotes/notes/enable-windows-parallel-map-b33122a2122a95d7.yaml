---
features:
  - |
    When running on Windows parallel execution with
    :func:`~qiskit.tools.parallel_map` (primarily with
    :func:`~qiskit.compiler.transpile` and :func:`~qiskit.compiler.assemble`)
    can now be enabled. To do this you can either set ``parallel = True`` in
    a user config file, or set the ``QISKIT_PARALLEL`` environment variable to
    ``TRUE``.
issues:
  - |
    On Windows systems when parallel execution is enabled for
    :func:`~qiskit.tools.parallel_map` (for example with
    :func:`~qiskit.compiler.transpile` and :func:`~qiskit.compiler.assemble`)
    may not work when caleld from a script running outside of a
    ``if __name__ == '__main__':`` block. This is due to how Python launches
    parallel processes on Windows. If ``RuntimeError`` or ``AttributeError``
    are raised by scripts that are directly calling parallel_map() or when
    calling a function that uses it internally with Windows and parallelism
    enabled embedding the script calls inside ``if __name__ == '__main__':``
    can workaround the issue. For example::

      from qiskit import QuantumCircuit, QiskitError
      from qiskit import execute, BasicAer

      qc1 = QuantumCircuit(2, 2)
      qc1.h(0)
      qc1.cx(0, 1)
      qc1.measure([0,1], [0,1])
      # making another circuit: superpositions
      qc2 = QuantumCircuit(2, 2)
      qc2.h([0,1])
      qc2.measure([0,1], [0,1])
      execute([qc1, qc2], BasicAer.get_backend('qasm_simulator'))

    should be changed to::

      from qiskit import QuantumCircuit, QiskitError
      from qiskit import execute, BasicAer

      def main():
          qc1 = QuantumCircuit(2, 2)
          qc1.h(0)
          qc1.cx(0, 1)
          qc1.measure([0,1], [0,1])
          # making another circuit: superpositions
          qc2 = QuantumCircuit(2, 2)
          qc2.h([0,1])
          qc2.measure([0,1], [0,1])
          execute([qc1, qc2], BasicAer.get_backend('qasm_simulator'))

      if __name__ == '__main__':
          main()

    if errors are encountered with parallelism on Windows.
